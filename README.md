## Быстрый старт
Для быстрого разворачивания проекта локально следуйте следующим шагам
1. Клонируйте репозиторий с помощью команды
```bash
git clone https://github.com/ByterGame/engine-for-managing-advertising-campaigns.git
```
2. Измените название файла ```.env-example``` на ```.env``` и заполните его своими данными
3. Запустите проект с помощью команды 
```bash
docker-compose up --build
```
В yml файле прописана команда для запуска миграций из ```alembic/versions```, там также уже находится initial миграция

В случае если вы хотите добавить свои миграции воспользуйтесь командами 
```bash
docker exec main_app alembic revision --autogenerate -m "NAME"
``` 
и 
```bash
docker exec main_app alembic upgrade head
```

## Запуск тестов
После успешного запуска контейнера установите зависимости для запуска тестов
```bash
pip install -r test_requirements.txt
```
Затем запустите тесты
```bash
pytest
```

## Краткое описание архитектуры движка правил
Иерархия правил проверяется строго по порядку приоритета. Первое сработавшее правило определяет целевой статус кампании. Приоритет: 1) Управление выключено, 2) Расписание, 3) Мало остатков, 4) Превышен бюджет, 5) Нет ограничений (активный статус).

Каждое правило — отдельный класс с единым интерфейсом Rule (методы: name, priority, evaluate, get_details). Правила регистрируются через декоратор @register_rule в RuleRegistry, который автоматически сортирует их по приоритету. RuleEngine (singleton) последовательно выполняет правила и возвращает результат первого сработавшего.

Архитектура основана на принципе открытости/закрытости: добавление нового правила не требует изменения существующего кода. Все правила изолированы, тестируемы независимо. Для добавления нового правила достаточно создать класс, унаследованный от Rule, реализовать методы и добавить декоратор — правило автоматически интегрируется в иерархию.